<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Buckshot Roulette</title>
<style>
  body {
    background: #000;
    color: #eee;
    font-family: system-ui, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .game {
    background: #111;
    padding: 1.5rem;
    border-radius: 14px;
    width: 420px;
  }

  h1 {
    text-align: center;
    margin-bottom: .5rem;
  }

  .dealer {
    font-size: .9rem;
    color: #aaa;
    min-height: 2.5em;
    margin-bottom: .5rem;
  }

  button {
    background: #8b1d1d;
    border: none;
    color: white;
    padding: .5rem .8rem;
    border-radius: 6px;
    cursor: pointer;
    margin: .2rem;
  }

  button.secondary {
    background: #333;
  }

  .inventory {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: .4rem;
    margin-top: 1rem;
  }

  .slot {
    background: #1c1c1c;
    border: 1px solid #333;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: .75rem;
    cursor: pointer;
    text-align: center;
  }

  .slot.empty {
    color: #444;
    cursor: default;
  }

  .status {
    margin-top: .6rem;
    min-height: 2em;
  }
</style>
</head>
<body>

<div class="game">
  <h1>Buckshot Roulette</h1>

  <div class="dealer" id="dealer">Dealer awaits.</div>

  <div>
    <button onclick="fire()">Pull Trigger</button>
    <button class="secondary" onclick="reload()">Reload</button>
  </div>

  <div class="status" id="status">â€”</div>

  <h3>Inventory</h3>
  <div class="inventory" id="inventory"></div>
</div>

<script>
/* ---------- GAME STATE ---------- */
let shells = [];
let liveCount = 0;
let blankCount = 0;
let inventory = Array(8).fill(null);
let sawed = false;

/* ---------- ITEM DEFINITIONS ---------- */
const ITEMS = [
  { name: "Beer", effect: beer },
  { name: "Saw", effect: saw },
  { name: "Magnifier", effect: magnifier },
  { name: "Cigarettes", effect: cigarettes },
  { name: "Handcuffs", effect: handcuffs },
  { name: "Inverter", effect: inverter },
  { name: "Adrenaline", effect: adrenaline },
  { name: "Pills", effect: pills },
  { name: "Phone", effect: phone }
];

/* ---------- ROUND SETUP ---------- */
function reload() {
  shells = [];
  sawed = false;

  const total = rand(2, 8);
  liveCount = rand(1, total - 1);
  blankCount = total - liveCount;

  for (let i = 0; i < liveCount; i++) shells.push("LIVE");
  for (let i = 0; i < blankCount; i++) shells.push("BLANK");

  shuffle(shells);

  document.getElementById("dealer").textContent =
    `Dealer: ${liveCount} live. ${blankCount} blank.`;

  grantRandomItems();
  updateInventory();
  setStatus("Shotgun loaded.");
}

/* ---------- FIRING ---------- */
function fire() {
  if (!shells.length) {
    setStatus("Empty chamber.");
    return;
  }

  let shell = shells.shift();

  if (shell === "LIVE") {
    setStatus(sawed ? "ðŸ’¥ SAWED LIVE SHELL" : "ðŸ’¥ LIVE SHELL");
    sawed = false;
  } else {
    setStatus("clickâ€¦ BLANK");
  }
}

/* ---------- ITEM EFFECTS ---------- */
function beer() {
  if (!shells.length) return setStatus("Nothing to eject.");
  shells.shift();
  setStatus("ðŸº Beer used â€” shell ejected.");
}

function saw() {
  sawed = true;
  setStatus("ðŸ”ª Saw used â€” next live shell amplified.");
}

function magnifier() {
  if (!shells.length) return setStatus("No shell to inspect.");
  setStatus(`ðŸ” Next shell is ${shells[0]}.`);
}

function cigarettes() {
  setStatus("ðŸš¬ Cigarettes â€” you feel better.");
}

function handcuffs() {
  setStatus("ðŸ”— Handcuffs â€” opponent skips turn.");
}

function inverter() {
  if (!shells.length) return;
  shells[0] = shells[0] === "LIVE" ? "BLANK" : "LIVE";
  setStatus("ðŸ”„ Shell inverted.");
}

function adrenaline() {
  setStatus("ðŸ“¦ Adrenaline â€” steal an item (IRL logic).");
}

function pills() {
  setStatus(Math.random() < 0.5
    ? "ðŸ’Š Pills healed you."
    : "ðŸ’Š Pills hurt you.");
}

function phone() {
  if (shells.length < 2) return setStatus("ðŸ“± Nothing ahead.");
  const idx = rand(1, Math.min(3, shells.length - 1));
  setStatus(`ðŸ“± Future shell (${idx + 1}): ${shells[idx]}`);
}

/* ---------- INVENTORY ---------- */
function grantRandomItems() {
  const count = rand(1, 4); // authentic range

  for (let i = 0; i < count; i++) {
    const item = ITEMS[rand(0, ITEMS.length - 1)];
    const slot = inventory.indexOf(null);
    if (slot !== -1) inventory[slot] = item;
  }
}

function updateInventory() {
  const inv = document.getElementById("inventory");
  inv.innerHTML = "";

  inventory.forEach((item, i) => {
    const div = document.createElement("div");
    div.className = "slot" + (item ? "" : " empty");
    div.textContent = item ? item.name : "Empty";

    if (item) {
      div.onclick = () => {
        item.effect();
        inventory[i] = null;
        updateInventory();
      };
    }

    inv.appendChild(div);
  });
}

/* ---------- HELPERS ---------- */
function setStatus(msg) {
  document.getElementById("status").textContent = msg;
}

function shuffle(a) {
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
}

function rand(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}
</script>

</body>
</html>
